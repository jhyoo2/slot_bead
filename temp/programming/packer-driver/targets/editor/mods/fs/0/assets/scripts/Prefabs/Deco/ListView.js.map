{"version":3,"sources":["file:///Users/david/Desktop/David/cocos/slot_bead/assets/scripts/Prefabs/Deco/ListView.ts"],"names":["_decorator","Component","Node","UITransform","Label","Size","Color","ccclass","property","ListView","onLoad","arrowNode","on","EventType","TOUCH_START","setActive","setDataList","dataList","setLabelIdx","contentNode","removeAllChildren","getComponent","setContentSize","length","i","obj","nodeIdx","Number","node","addComponent","setPosition","label","fontSize","color","lineHeight","string","addChild","open","scrollNode","active","idx","callback","setLabel","tag","dataTag","selectedIdx","labelNode","resetLabel"],"mappings":"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","sourcesContent":["import {\n  _decorator,\n  Component,\n  Node,\n  UITransform,\n  Sprite,\n  Label,\n  tween,\n  Size,\n  Color,\n} from \"cc\";\nconst { ccclass, property } = _decorator;\n\n@ccclass(\"ListView\")\nexport default class ListView extends Component {\n  @property(Node)\n  arrowNode: Node | null = null;\n  @property(Node)\n  labelNode: Node | null = null;\n  @property(Node)\n  scrollNode: Node | null = null;\n  @property(Node)\n  contentNode: Node | null = null;\n  open = false;\n  selectedIdx = 0;\n  dataList = [];\n  callback = null;\n  async onLoad() {\n    this.arrowNode.on(Node.EventType.TOUCH_START, this.setActive, this);\n    // this.setDataList([]);\n  }\n  setDataList(dataList) {\n    this.dataList = dataList;\n    this.setLabelIdx(0);\n    this.contentNode.removeAllChildren();\n    this.contentNode\n      .getComponent(UITransform)\n      .setContentSize(new Size(300, 80 * dataList.length));\n    for (var i in dataList) {\n      const obj = this.dataList[i];\n      const nodeIdx = Number(i);\n      const node = new Node();\n      node.addComponent(UITransform).setContentSize(new Size(300, 80));\n      node.setPosition(0, -40 - 80 * Number(i));\n      const label = node.addComponent(Label);\n      label.fontSize = 40;\n      label.color = new Color(0, 0, 0, 255);\n      label.lineHeight = 40;\n      label.string = obj.label;\n      this.contentNode.addChild(node);\n      node.on(\n        Node.EventType.TOUCH_START,\n        () => {\n          this.setLabelIdx(nodeIdx);\n        },\n        this\n      );\n    }\n  }\n  setActive() {\n    if (this.open) {\n      this.open = false;\n      this.scrollNode.active = false;\n    } else {\n      this.open = true;\n      this.scrollNode.active = true;\n    }\n  }\n  setLabelIdx(idx) {\n    this.open = false;\n    this.scrollNode.active = false;\n    if (this.callback) {\n      this.callback(this.dataList[idx]);\n    }\n  }\n  setLabel(tag) {\n    var idx = 0;\n    for (var i in this.dataList) {\n      const dataTag = this.dataList[i].tag;\n      if (dataTag == tag) {\n        idx = Number(i);\n        break;\n      }\n    }\n    this.selectedIdx = idx;\n    this.labelNode.getComponent(Label).string = this.dataList[idx].label;\n  }\n  resetLabel() {\n    const idx = 0;\n    this.selectedIdx = idx;\n    this.labelNode.getComponent(Label).string = this.dataList[idx].label;\n  }\n}\n"]}