{"version":3,"sources":["file:///Users/david/Desktop/David/cocos/slot_bead/assets/scripts/Scenes/ObstacleNode.ts"],"names":["_decorator","Node","Vec3","Collider2D","Contact2DType","Label","tween","BaseScene","PinballScene","ccclass","property","ObstacleNode","String","onLoad","collider","getComponent","on","BEGIN_CONTACT","onBeginContact","selfCollider","otherCollider","contact","pinballScene","addGold","Number","myTag","myNode","myLabel","addComponent","string","node","addChild","setPosition","by","position","delay","call","removeFromParent","destroy","start"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AACEA,MAAAA,U,OAAAA,U;AAGAC,MAAAA,I,OAAAA,I;AAMAC,MAAAA,I,OAAAA,I;AAOAC,MAAAA,U,OAAAA,U;AACAC,MAAAA,a,OAAAA,a;AAEAC,MAAAA,K,OAAAA,K;AACAC,MAAAA,K,OAAAA,K;;AAIKC,MAAAA,S;;AAGEC,MAAAA,Y,iBAAAA,Y;;;;;;;OALH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBV,U;;8BAQjBW,Y,WADZF,OAAO,CAAC,cAAD,C,UAELC,QAAQ,CAACE,MAAD,C,UAGRF,QAAQ;AAAA;AAAA,uC,oCALX,MACaC,YADb;AAAA;AAAA,kCAC4C;AAAA;AAAA;;AAAA;;AAAA;AAAA;;AAO9B,cAANE,MAAM,GAAG;AACb,gBAAMA,MAAN;AAEA,cAAIC,QAAQ,GAAG,KAAKC,YAAL,CAAkBZ,UAAlB,CAAf;;AACA,cAAIW,QAAJ,EAAc;AACZA,YAAAA,QAAQ,CAACE,EAAT,CAAYZ,aAAa,CAACa,aAA1B,EAAyC,KAAKC,cAA9C,EAA8D,IAA9D,EADY,CAEZ;AACA;AACA;AACD;AACF;;AACDA,QAAAA,cAAc,CACZC,YADY,EAEZC,aAFY,EAGZC,OAHY,EAIZ;AACA,cAAI,KAAKC,YAAT,EAAuB;AACrB,iBAAKA,YAAL,CAAkBC,OAAlB,CAA0BC,MAAM,CAAC,KAAKC,KAAN,CAAN,GAAqB,EAA/C;AACD,WAHD,CAIA;AACA;;;AACA,gBAAMC,MAAM,GAAG,IAAIzB,IAAJ,EAAf;AACA,gBAAM0B,OAAO,GAAGD,MAAM,CAACE,YAAP,CAAoBvB,KAApB,CAAhB;AACAsB,UAAAA,OAAO,CAACE,MAAR,GAAiB,YAAYL,MAAM,CAAC,KAAKC,KAAN,CAAN,GAAqB,EAAlD;AACA,eAAKK,IAAL,CAAUC,QAAV,CAAmBL,MAAnB;AACAA,UAAAA,MAAM,CAACM,WAAP,CAAmB,IAAI9B,IAAJ,CAAS,CAAT,EAAY,GAAZ,EAAiB,CAAjB,CAAnB;AACAI,UAAAA,KAAK,CAACoB,MAAD,CAAL,CACGO,EADH,CACM,GADN,EACW;AAAEC,YAAAA,QAAQ,EAAE,IAAIhC,IAAJ,CAAS,CAAT,EAAY,EAAZ,EAAgB,CAAhB;AAAZ,WADX,EAEGiC,KAFH,CAES,GAFT,EAGGC,IAHH,CAGQ,MAAM;AACVV,YAAAA,MAAM,CAACW,gBAAP;AACAX,YAAAA,MAAM,CAACY,OAAP;AACD,WANH,EAOGC,KAPH;AAQD;;AAzCyC,O;;;;;iBAElC,E;;;;;;;iBAGqB,I","sourcesContent":["import {\r\n  _decorator,\r\n  size,\r\n  director,\r\n  Node,\r\n  PhysicsSystem2D,\r\n  Vec2,\r\n  PHYSICS_2D_PTM_RATIO,\r\n  EPhysics2DDrawFlags,\r\n  RigidBody,\r\n  Vec3,\r\n  RigidBody2D,\r\n  Prefab,\r\n  instantiate,\r\n  SpriteFrame,\r\n  Sprite,\r\n  UIOpacityComponent,\r\n  Collider2D,\r\n  Contact2DType,\r\n  IPhysics2DContact,\r\n  Label,\r\n  tween,\r\n} from \"cc\";\r\nconst { ccclass, property } = _decorator;\r\n\r\nimport BaseScene from \"../BaseObject/BaseScene\";\r\nimport AssetManager from \"../DataManager/AssetManager\";\r\nimport BaseRoom from \"../Prefabs/Room/BaseRoom\";\r\nimport { PinballScene } from \"./PinballScene\";\r\n\r\n@ccclass(\"ObstacleNode\")\r\nexport class ObstacleNode extends BaseScene {\r\n  @property(String)\r\n  myTag = \"\";\r\n\r\n  @property(PinballScene)\r\n  pinballScene: PinballScene = null;\r\n\r\n  async onLoad() {\r\n    super.onLoad();\r\n\r\n    let collider = this.getComponent(Collider2D);\r\n    if (collider) {\r\n      collider.on(Contact2DType.BEGIN_CONTACT, this.onBeginContact, this);\r\n      // collider.on(Contact2DType.END_CONTACT, this.onEndContact, this);\r\n      // collider.on(Contact2DType.PRE_SOLVE, this.onPreSolve, this);\r\n      // collider.on(Contact2DType.POST_SOLVE, this.onPostSolve, this);\r\n    }\r\n  }\r\n  onBeginContact(\r\n    selfCollider: Collider2D,\r\n    otherCollider: Collider2D,\r\n    contact: IPhysics2DContact | null\r\n  ) {\r\n    if (this.pinballScene) {\r\n      this.pinballScene.addGold(Number(this.myTag) * 10);\r\n    }\r\n    // will be called once when two colliders begin to contact\r\n    // console.log(\"onBeginContact\", otherCollider);\r\n    const myNode = new Node();\r\n    const myLabel = myNode.addComponent(Label);\r\n    myLabel.string = \"GOLD + \" + Number(this.myTag) * 10;\r\n    this.node.addChild(myNode);\r\n    myNode.setPosition(new Vec3(0, 100, 0));\r\n    tween(myNode)\r\n      .by(0.2, { position: new Vec3(0, 70, 0) })\r\n      .delay(0.3)\r\n      .call(() => {\r\n        myNode.removeFromParent();\r\n        myNode.destroy();\r\n      })\r\n      .start();\r\n  }\r\n}\r\n"]}