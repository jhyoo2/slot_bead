{"version":3,"sources":["file:///Users/david/Desktop/David/cocos/slot_deco/assets/scripts/Prefabs/Deco/DecoMaster-001.ts"],"names":["_decorator","Component","Node","Slider","ToggleComponent","ccclass","property","DecoMaster","onLoad","kindScript","kindNode","getComponent","setDataList","tag","label","callback","idx","decoData","setDecoData","placeScript","placeNode","anchorScript","anchorNode","pointScript","pointNode","vec","sizeScript","sizeNode","stackSizeScript","stackSizeNode","update","dt","setLabel","decoType","placeType","anchorType","decoPoint","decoSize","stackableScript","stackToggleNode","isChecked","stackable","kind","obj","sceneScript","resetDecoObject","resetLabel","opacityNode","progress","eraseClicked","eraseDeco","sliderEvent","node","toggleEvent"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node, Slider, ToggleComponent } from \"cc\";\nimport { RoomScene, Deco } from \"../../Scenes/RoomScene\";\nimport ListView from \"./ListView\";\nimport VectorList from \"./VectorList\";\nconst { ccclass, property } = _decorator;\n\n@ccclass(\"DecoMaster\")\nexport default class DecoMaster extends Component {\n  @property(Node)\n  kindNode: Node | null = null;\n  @property(Node)\n  placeNode: Node | null = null;\n  @property(Node)\n  anchorNode: Node | null = null;\n  @property(Node)\n  pointNode: Node | null = null;\n  @property(Node)\n  sizeNode: Node | null = null;\n  @property(Node)\n  opacityNode: Node | null = null;\n  @property(Node)\n  stackToggleNode: Node | null = null;\n  @property(Node)\n  stackSizeNode: Node | null = null;\n  sceneScript: RoomScene = null;\n  decoData: Deco = null;\n  async onLoad() {\n    const kindScript = this.kindNode.getComponent(\"ListView\") as ListView;\n    // console.log(this.kindNode);\n    kindScript.setDataList([\n      { tag: \"00\", label: \"미설정\" },\n      { tag: \"01\", label: \"바닥\" },\n      { tag: \"02\", label: \"벽지\" },\n      { tag: \"03\", label: \"세입자\" },\n      { tag: \"04\", label: \"가구\" },\n      { tag: \"05\", label: \"가전\" },\n      { tag: \"06\", label: \"기타\" },\n    ]);\n    kindScript.callback = (idx) => {\n      if (!this.decoData) {\n        return false;\n      }\n      this.setDecoData(\"decoType\", idx);\n      return true;\n    };\n    const placeScript = this.placeNode.getComponent(\"ListView\") as ListView;\n    placeScript.setDataList([\n      { tag: \"00\", label: \"미설정\" },\n      { tag: \"01\", label: \"바닥\" },\n      { tag: \"02\", label: \"좌측 벽\" },\n      { tag: \"03\", label: \"우측 벽\" },\n      { tag: \"04\", label: \"양측 벽\" },\n    ]);\n    placeScript.callback = (idx) => {\n      this.setDecoData(\"placeType\", idx);\n    };\n    const anchorScript = this.anchorNode.getComponent(\"ListView\") as ListView;\n    anchorScript.setDataList([\n      { tag: \"00\", label: \"중앙\" },\n      { tag: \"01\", label: \"아래쪽\" },\n      { tag: \"02\", label: \"왼쪽\" },\n      { tag: \"03\", label: \"오른쪽\" },\n    ]);\n    anchorScript.callback = (idx) => {\n      this.setDecoData(\"anchorType\", idx);\n    };\n    const pointScript = this.pointNode.getComponent(\"VectorList\") as VectorList;\n    pointScript.callback = (vec) => {\n      this.setDecoData(\"decoPoint\", vec);\n    };\n    const sizeScript = this.sizeNode.getComponent(\"VectorList\") as VectorList;\n    sizeScript.callback = (vec) => {\n      this.setDecoData(\"decoSize\", vec);\n    };\n    const stackSizeScript = this.stackSizeNode.getComponent(\n      \"VectorList\"\n    ) as VectorList;\n    stackSizeScript.callback = (vec) => {\n      this.setDecoData(\"stackSize\", vec);\n    };\n  }\n  update(dt) {\n    if (this.decoData) {\n      const kindScript = this.kindNode.getComponent(\"ListView\") as ListView;\n      kindScript.setLabel(this.decoData.decoType);\n      const placeScript = this.placeNode.getComponent(\"ListView\") as ListView;\n      placeScript.setLabel(this.decoData.placeType);\n      const anchorScript = this.anchorNode.getComponent(\"ListView\") as ListView;\n      anchorScript.setLabel(this.decoData.anchorType);\n      const pointScript = this.pointNode.getComponent(\"VectorList\") as ListView;\n      pointScript.setLabel(this.decoData.decoPoint);\n      const sizeScript = this.sizeNode.getComponent(\"VectorList\") as ListView;\n      sizeScript.setLabel(this.decoData.decoSize);\n      const stackableScript = this.stackToggleNode.getComponent(\n        ToggleComponent\n      ) as ToggleComponent;\n      stackableScript.isChecked = this.decoData.stackable;\n    }\n  }\n  setDecoData(kind, obj) {\n    if (this.sceneScript && this.decoData) {\n      this.sceneScript.setDecoData(kind, obj);\n    }\n  }\n  resetDecoObject() {\n    this.decoData = null;\n    const kindScript = this.kindNode.getComponent(\"ListView\") as ListView;\n    kindScript.resetLabel();\n    const placeScript = this.placeNode.getComponent(\"ListView\") as ListView;\n    placeScript.resetLabel();\n    const anchorScript = this.anchorNode.getComponent(\"ListView\") as ListView;\n    anchorScript.resetLabel();\n    const pointScript = this.pointNode.getComponent(\"VectorList\") as ListView;\n    pointScript.resetLabel();\n    const sizeScript = this.sizeNode.getComponent(\"VectorList\") as ListView;\n    sizeScript.resetLabel();\n    this.opacityNode.getComponent(Slider).progress = 1.0;\n    // console.log(this.decoData);\n  }\n  eraseClicked() {\n    if (this.sceneScript && this.decoData) {\n      this.sceneScript.eraseDeco();\n    }\n  }\n  sliderEvent(node, kind) {\n    if (kind == \"opacity\") {\n      this.setDecoData(\"opacity\", {\n        tag: this.opacityNode.getComponent(Slider).progress,\n      });\n    }\n  }\n  toggleEvent(node, kind) {\n    this.setDecoData(\"stackable\", { tag: node.isChecked });\n  }\n}\n"]}