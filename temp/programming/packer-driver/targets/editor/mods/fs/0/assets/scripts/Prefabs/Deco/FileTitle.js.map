{"version":3,"sources":["file:///Users/david/Desktop/David/cocos/slot_bead/assets/scripts/Prefabs/Deco/FileTitle.ts"],"names":["_decorator","Component","Node","Label","Vec3","color","Sprite","UITransformComponent","Size","instantiate","AssetManager","ccclass","property","FileTitle","onLoad","assetManager","getInstance","scrollNode","getComponent","setContentSize","setLabel","string","labelNode","onArrowClicked","opened","scale","arrowNode","getScale","setScale","x","Math","abs","y","z","active","fileMaster","updateFileMaster","setActive","bool","node","getTitleSize","min","fileDatas","length","setFileData","contentNode","parent","removeAllChildren","i","fileListNode","prefabDic","setPosition","addChild","fileList","label","fileData","fileTitle","onFileSelected","onChangeOrder","kind"],"mappings":"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","sourcesContent":["import {\n  _decorator,\n  Component,\n  Node,\n  Label,\n  Vec3,\n  color,\n  Sprite,\n  UITransformComponent,\n  Size,\n  instantiate,\n} from \"cc\";\nimport FileMaster from \"./FileMaster\";\nimport FileList from \"./FileList\";\nimport { Deco } from \"../../Prefabs/Deco/DecoTypes\";\nimport AssetManager from \"../../DataManager/AssetManager\";\nconst { ccclass, property } = _decorator;\n\n@ccclass(\"FileTitle\")\nexport default class FileTitle extends Component {\n  assetManager: AssetManager = null;\n  @property(Node)\n  labelNode: Node | null = null;\n  @property(Node)\n  arrowNode: Node | null = null;\n  @property(Node)\n  scrollNode: Node | null = null;\n  @property(Node)\n  contentNode: Node | null = null;\n  opened = false;\n  tag = \"00\";\n  fileDatas = [];\n  fileMaster: FileMaster = null;\n\n  async onLoad() {\n    this.assetManager = AssetManager.getInstance();\n    this.scrollNode\n      .getComponent(UITransformComponent)\n      .setContentSize(new Size(850, 10));\n  }\n  setLabel(string) {\n    this.labelNode.getComponent(Label).string = string;\n  }\n  onArrowClicked() {\n    this.opened = !this.opened;\n    const scale = this.arrowNode.getScale();\n    if (this.opened) {\n      // open\n      this.arrowNode.setScale(new Vec3(scale.x, -Math.abs(scale.y), scale.z));\n      this.scrollNode.active = true;\n    } else {\n      // close\n      this.arrowNode.setScale(new Vec3(scale.x, Math.abs(scale.y), scale.z));\n      this.scrollNode.active = false;\n    }\n    this.fileMaster.updateFileMaster();\n  }\n  setActive(bool) {\n    if (bool) {\n      this.labelNode.getComponent(Label).color = color(255, 0, 0, 255);\n      this.node.getComponent(Sprite).color = color(100, 100, 100, 255);\n    } else {\n      this.labelNode.getComponent(Label).color = color(0, 0, 0, 255);\n      this.node.getComponent(Sprite).color = color(211, 211, 211, 255);\n    }\n  }\n  getTitleSize() {\n    if (this.opened) {\n      return new Vec3(\n        850,\n        80 + Math.min(290, 10 + 80 * this.fileDatas.length),\n        1\n      );\n    } else {\n      return new Vec3(850, 80, 1);\n    }\n  }\n  setFileData(fileDatas: Deco[]) {\n    this.fileDatas = fileDatas;\n    const length = fileDatas.length;\n    this.scrollNode\n      .getComponent(UITransformComponent)\n      .setContentSize(new Size(850, Math.min(290, 10 + 80 * length)));\n    this.contentNode.parent\n      .getComponent(UITransformComponent)\n      .setContentSize(new Size(850, Math.min(290, 10 + 80 * length)));\n    this.contentNode\n      .getComponent(UITransformComponent)\n      .setContentSize(new Size(850, 90 + 80 * length));\n    ///////////////////////////\n    this.contentNode.removeAllChildren();\n    for (var i = 0; i < length; i++) {\n      const fileListNode = instantiate(this.assetManager.prefabDic[\"FileList\"]);\n      fileListNode.setPosition(new Vec3(0, -45 - 80 * i, 1));\n      this.contentNode.addChild(fileListNode);\n      const fileList = fileListNode.getComponent(\"FileList\") as FileList;\n      fileList.setLabel(fileDatas[i].label);\n      fileList.fileData = fileDatas[i];\n      fileList.fileTitle = this;\n    }\n  }\n  onFileSelected(fileData) {\n    if (this.fileMaster) {\n      this.fileMaster.onFileSelected(fileData);\n    }\n  }\n  onChangeOrder(fileData, kind) {\n    if (this.fileMaster) {\n      this.fileMaster.onChangeOrder(fileData, kind);\n    }\n  }\n}\n"]}