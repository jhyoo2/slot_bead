{"version":3,"sources":["file:///Users/david/Desktop/David/cocos/slot_deco/assets/scripts/Scenes/DecoToolScene.ts"],"names":["_decorator","Node","instantiate","Vec3","ImageAsset","Sprite","SpriteFrame","Texture2D","UITransform","Size","UIOpacityComponent","BaseScene","AssetManager","uuidv4","DecoMaster","DecoAlert","ccclass","property","DecoToolScene","onLoad","setWideResolution","assetManager","getInstance","assetResult","loadAssets","roomNode","prefabDic","scale","node","insertChild","roomScript","getComponent","showBlock","decoMaster","setPosition","winSize","width","height","sceneScript","addChild","fileMaster","fileScript","decoDic","on","EventType","TOUCH_MOVE","onTouchMove","TOUCH_END","onTouchEnd","TOUCH_CANCEL","showGrid","isChecked","addDecoData","decoObject","tag","activeDeco","decoData","initDefaultDeco","decoId","placeType","keys","Object","zOrder","i","label","String","length","imgNode","getImgNode","img","imgSprite","sizeMode","SizeMode","RAW","trim","objectArray","push","objectId","id","objectIdx","objectPoint","objectSize","objectPlace","imgURL","spriteFrame","imgFile","file","shadowFrame","shadowFile","buyType","cashPrice","j","Number","labelArray","imgSize","contentSize","xSize","Math","min","ceil","ySize","decoPoint","floor","zSize","TOUCH_START","event","propagationStopped","onDecoSelected","nodeOrder","addDecoNode","updateDecoPoint","placeDeco","selectedDeco","anchorType","resetDecoObject","updateFileMaster","imgResult","imgAsset","sprite","addComponent","tex","image","texture","transform","setContentSize","opacityNode","opacity","decoType","stackable","stackSize","defaultObjectId","eraseDeco","removeFromParent","setDecoData","kind","obj","setObjectData","getAnchorPoint","updateDecoPlace","point","size","anchor","x","max","y","z","getBlockPosition","showDecoBlock","checkDecoData","console","log","onFileSelected","fileData","location","touch","getUILocation","zeroPos","sizePos","targetList","getBlockTarget","targetBlock","baseDis","block","distance","sqrt","pow","getWorldPosition","blockScript","blockPosition","simulate","setSelectedDeco","idx","assetDic","replaceDeco","imgPos","imgDistance","shadowPos","shadowNode","shadowDistance","replaceObjImage","replaceImg","imgObject","sendImage","fileName","r","fetch","method","headers","body","JSON","stringify","parse","text","roomDecoSelected","selectedIdx","decoKeys","key","resetRoomDeco","modalLayer","setModalColor","alertPrefab","alertScript","setTitleLabel","setMainLabel","self","yesEvent","removeObjDic","removeAlert","saveRoomDeco","objList","decoList","roomDic","roomId","docoList","decoKey","decoObjList","copyObj","assign","result","url","copyDeco"],"mappings":"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","sourcesContent":["import {\r\n  _decorator,\r\n  Node,\r\n  instantiate,\r\n  Vec3,\r\n  ImageAsset,\r\n  Sprite,\r\n  SpriteFrame,\r\n  Texture2D,\r\n  UITransform,\r\n  Size,\r\n  UIOpacityComponent,\r\n  JsonAsset,\r\n} from \"cc\";\r\nconst { ccclass, property } = _decorator;\r\n\r\nimport BaseScene from \"../BaseObject/BaseScene\";\r\nimport AssetManager from \"../DataManager/AssetManager\";\r\nimport RoomTemplate from \"../Prefabs/Room/RoomTemplate\";\r\nimport { uuidv4 } from \"../Common/Module\";\r\nimport DecoMaster from \"../Prefabs/Deco/DecoMaster\";\r\nimport FileMaster from \"../Prefabs/Deco/FileMaster\";\r\nimport RoomBlock from \"../Prefabs/Room/RoomBlock\";\r\n\r\nimport {\r\n  Deco,\r\n  FileObject,\r\n  DecoType,\r\n  PlaceType,\r\n  AnchorType,\r\n} from \"../Prefabs/Deco/DecoTypes\";\r\nimport DecoAlert from \"../Prefabs/Deco/DecoAlert\";\r\n\r\n@ccclass(\"DecoToolScene\")\r\nexport class DecoToolScene extends BaseScene {\r\n  assetManager: AssetManager = null;\r\n\r\n  // (1) room node\r\n  roomNode: Node = null;\r\n  // roomTemplate: RoomTemplate = null;\r\n\r\n  // (5) deco data\r\n  decoMaster: Node = null;\r\n  fileMaster: Node = null;\r\n  activeDeco: Deco = null;\r\n  // activeObject = 0;\r\n  selectedDeco: Node = null;\r\n  decoDic: { [name: string]: Deco } = {};\r\n  selectedIdx = 0;\r\n\r\n  async onLoad() {\r\n    super.setWideResolution();\r\n    this.assetManager = AssetManager.getInstance();\r\n    const assetResult = await this.assetManager.loadAssets();\r\n    const roomNode = instantiate(this.assetManager.prefabDic[\"RoomTemplate\"]);\r\n    // roomNode.setPosition(new Vec3(0, 250, 0));\r\n    roomNode.scale = new Vec3(1.5, 1.5, 1.5);\r\n    // roomNode.scale = new Vec3(1.25, 1.25, 1.25);\r\n    this.node.insertChild(roomNode, 10);\r\n    this.roomNode = roomNode;\r\n    const roomScript = this.roomNode.getComponent(\r\n      \"RoomTemplate\"\r\n    ) as RoomTemplate;\r\n    roomScript.showBlock(false);\r\n\r\n    // set deco master\r\n    const decoMaster = instantiate(this.assetManager.prefabDic[\"DecoMaster\"]);\r\n    decoMaster.setPosition(\r\n      new Vec3(this.winSize.width / 2 - 370, this.winSize.height / 2, 1)\r\n    );\r\n    decoMaster.getComponent(\"DecoMaster\").sceneScript = this;\r\n    this.node.addChild(decoMaster);\r\n    this.decoMaster = decoMaster;\r\n\r\n    // set file master\r\n    const fileMaster = instantiate(this.assetManager.prefabDic[\"FileMaster\"]);\r\n    fileMaster.setPosition(\r\n      new Vec3(-this.winSize.width / 2 + 370, this.winSize.height / 2, 1)\r\n    );\r\n    this.node.addChild(fileMaster);\r\n    const fileScript = fileMaster.getComponent(\"FileMaster\") as FileMaster;\r\n    fileScript.sceneScript = this;\r\n    fileScript.decoDic = this.decoDic;\r\n    this.fileMaster = fileMaster;\r\n\r\n    // add touchEvent\r\n    this.node.on(Node.EventType.TOUCH_MOVE, this.onTouchMove, this, true);\r\n    this.node.on(Node.EventType.TOUCH_END, this.onTouchEnd, this, true);\r\n    this.node.on(Node.EventType.TOUCH_CANCEL, this.onTouchEnd, this, true);\r\n  }\r\n  showGrid(node) {\r\n    const roomScript = this.roomNode.getComponent(\r\n      \"RoomTemplate\"\r\n    ) as RoomTemplate;\r\n    roomScript.showBlock(node.isChecked);\r\n  }\r\n  /////// ////////////////////////////\r\n  // (1) select deco\r\n  addDecoData(decoObject: FileObject, tag) {\r\n    if (this.activeDeco) {\r\n      this.activeDeco = null;\r\n    }\r\n    // add deco data\r\n    const decoData = this.initDefaultDeco(decoObject);\r\n    this.decoDic[decoData.decoId] = decoData;\r\n    this.activeDeco = decoData;\r\n    this.activeDeco.placeType = tag;\r\n    const keys = Object.keys(this.decoDic);\r\n    let zOrder = 0;\r\n    for (var i in keys) {\r\n      if (this.decoDic[keys[i]].placeType == tag) {\r\n        zOrder++;\r\n      }\r\n    }\r\n    this.activeDeco.label = \"오브젝트\" + String(keys.length);\r\n    this.activeDeco.zOrder = zOrder;\r\n\r\n    // add deco image\r\n    const imgNode = this.getImgNode(decoObject.img);\r\n    const imgSprite = imgNode.getComponent(Sprite) as Sprite;\r\n    imgSprite.sizeMode = Sprite.SizeMode.RAW;\r\n    imgSprite.trim = true;\r\n\r\n    this.activeDeco.objectArray.push({\r\n      objectId: decoObject.id,\r\n      objectIdx: 0,\r\n      decoId: decoData.decoId,\r\n      objectPoint: new Vec3(0, 0, 0),\r\n      objectSize: new Vec3(1, 1, 1),\r\n      objectPlace: new Vec3(0, 0, 0),\r\n      imgURL: \"\",\r\n      spriteFrame: imgSprite.spriteFrame,\r\n      imgFile: decoObject.file,\r\n      shadowFrame: \"\",\r\n      shadowFile: \"\",\r\n      buyType: \"00\",\r\n      cashPrice: 0,\r\n    });\r\n    for (var j = 0; j < 2; j++) {\r\n      this.activeDeco.objectArray.push({\r\n        objectId: \"\",\r\n        objectIdx: Number(j) + 1,\r\n        decoId: decoData.decoId,\r\n        objectPoint: new Vec3(0, 0, 0),\r\n        objectSize: new Vec3(1, 1, 1),\r\n        objectPlace: new Vec3(0, 0, 0),\r\n        imgURL: \"\",\r\n        spriteFrame: \"\",\r\n        imgFile: \"\",\r\n        shadowFrame: \"\",\r\n        shadowFile: \"\",\r\n        buyType: \"00\",\r\n        cashPrice: 0,\r\n      });\r\n    }\r\n    const labelArray = [\"전체(0)\", \"바닥(0)\", \"왼쪽 벽(0)\", \"오른쪽 벽(0)\"];\r\n    const imgSize = (imgNode.getComponent(UITransform) as UITransform)\r\n      .contentSize;\r\n    if (tag == \"01\") {\r\n      const xSize = Math.min(18, Math.ceil(imgSize.width / (140 / 3)));\r\n      const ySize = Math.min(18, Math.ceil(imgSize.height / (40 / 3)));\r\n      this.activeDeco.objectArray[0].objectSize = new Vec3(xSize, ySize, 0);\r\n      this.activeDeco.decoPoint = new Vec3(\r\n        9 - Math.floor(xSize / 2),\r\n        9 - Math.floor(ySize / 2),\r\n        0\r\n      );\r\n    } else if (tag == \"02\") {\r\n      const ySize = Math.min(18, Math.ceil(imgSize.width / (70 / 3)));\r\n      const zSize = Math.min(18, Math.ceil(imgSize.height / (85 / 3)));\r\n      this.activeDeco.objectArray[0].objectSize = new Vec3(0, ySize, zSize);\r\n      this.activeDeco.decoPoint = new Vec3(\r\n        0,\r\n        9 - Math.floor(ySize / 2),\r\n        9 - Math.floor(zSize / 2)\r\n      );\r\n    } else if (tag == \"03\") {\r\n      const xSize = Math.min(18, Math.ceil(imgSize.width / (70 / 3)));\r\n      const zSize = Math.min(18, Math.ceil(imgSize.height / (85 / 3)));\r\n      this.activeDeco.objectArray[0].objectSize = new Vec3(xSize, 0, zSize);\r\n      this.activeDeco.decoPoint = new Vec3(\r\n        9 - Math.floor(xSize / 2),\r\n        17,\r\n        9 - Math.floor(zSize / 2)\r\n      );\r\n    }\r\n    // console.log(this.activeDeco.objectArray[0].objectSize);\r\n    // console.log(this.activeDeco.decoPoint);\r\n\r\n    if (decoData.placeType != \"00\") {\r\n      imgNode.on(\r\n        Node.EventType.TOUCH_START,\r\n        (event) => {\r\n          event.propagationStopped = true;\r\n          this.onDecoSelected(decoData);\r\n        },\r\n        this\r\n      );\r\n    }\r\n    let nodeOrder = Object.keys(this.decoDic).length;\r\n    // if (tag == \"00\") {\r\n    //   nodeOrder = 99;\r\n    // }\r\n    (this.roomNode.getComponent(\"RoomTemplate\") as RoomTemplate).addDecoNode(\r\n      imgNode,\r\n      nodeOrder,\r\n      tag == \"00\"\r\n    );\r\n    this.activeDeco.node = imgNode;\r\n\r\n    // set deco position\r\n    this.updateDecoPoint();\r\n    this.placeDeco(\r\n      this.activeDeco.node,\r\n      this.activeDeco.decoPoint,\r\n      this.activeDeco.objectArray[this.activeDeco.selectedDeco].objectPoint,\r\n      this.activeDeco.objectArray[this.activeDeco.selectedDeco].objectSize,\r\n      this.activeDeco.anchorType\r\n    );\r\n\r\n    // reset deco & file master\r\n    const decoMaster = this.decoMaster.getComponent(\"DecoMaster\") as DecoMaster;\r\n    decoMaster.resetDecoObject();\r\n    const fileMaster = this.fileMaster.getComponent(\"FileMaster\") as FileMaster;\r\n    fileMaster.updateFileMaster();\r\n    decoMaster.decoData = this.activeDeco;\r\n  }\r\n  getImgNode(imgResult) {\r\n    const imgAsset = new ImageAsset(imgResult);\r\n    const node = new Node();\r\n    const sprite = node.addComponent(Sprite);\r\n    const spriteFrame = new SpriteFrame();\r\n    const tex = new Texture2D();\r\n    tex.image = imgAsset;\r\n    spriteFrame.texture = tex;\r\n    sprite.spriteFrame = spriteFrame;\r\n    const transform = node.getComponent(UITransform);\r\n    transform.setContentSize(new Size(180, 180));\r\n    const opacityNode = node.addComponent(UIOpacityComponent);\r\n    opacityNode.opacity = 255;\r\n    return node;\r\n  }\r\n\r\n  initDefaultDeco(decoObject: FileObject): Deco {\r\n    return {\r\n      decoId: uuidv4(),\r\n      selectedDeco: 0,\r\n      decoType: \"00\" as DecoType,\r\n      placeType: \"00\" as PlaceType,\r\n      decoPoint: new Vec3(0, 0, 0),\r\n      anchorType: \"00\" as AnchorType,\r\n      opacity: 1.0,\r\n      stackable: false,\r\n      stackSize: new Vec3(1, 1, 1),\r\n      defaultObjectId: decoObject.id,\r\n      objectArray: [],\r\n      zOrder: 0,\r\n      node: null,\r\n      label: \"\",\r\n    };\r\n  }\r\n\r\n  eraseDeco() {\r\n    if (this.activeDeco) {\r\n      if (this.activeDeco.node) {\r\n        this.activeDeco.node.removeFromParent();\r\n      }\r\n      const decoId = this.activeDeco.decoId;\r\n      delete this.decoDic[decoId];\r\n      this.activeDeco = null;\r\n    }\r\n    const decoMaster = this.decoMaster.getComponent(\"DecoMaster\") as DecoMaster;\r\n    decoMaster.resetDecoObject();\r\n    const fileMaster = this.fileMaster.getComponent(\"FileMaster\") as FileMaster;\r\n    fileMaster.updateFileMaster();\r\n  }\r\n\r\n  setDecoData(kind, obj) {\r\n    // console.log(kind, obj);\r\n    this.activeDeco[kind] = obj.tag;\r\n    if (kind == \"opacity\") {\r\n      this.activeDeco.node.getComponent(UIOpacityComponent).opacity =\r\n        obj.tag * 255;\r\n      return;\r\n    }\r\n    // console.log(kind, obj);\r\n    if (kind == \"decoType\" || kind == \"placeType\") {\r\n      this.updateDecoPoint();\r\n    }\r\n\r\n    if (\r\n      kind == \"decoType\" ||\r\n      kind == \"placeType\" ||\r\n      kind == \"decoPoint\" ||\r\n      kind == \"anchorType\"\r\n    ) {\r\n      this.placeDeco(\r\n        this.activeDeco.node,\r\n        this.activeDeco.decoPoint,\r\n        this.activeDeco.objectArray[this.activeDeco.selectedDeco].objectPoint,\r\n        this.activeDeco.objectArray[this.activeDeco.selectedDeco].objectSize,\r\n        this.activeDeco.anchorType\r\n      );\r\n    }\r\n  }\r\n  setObjectData(kind, obj) {\r\n    // console.log(kind, obj);\r\n    this.activeDeco.objectArray[this.activeDeco.selectedDeco][kind] = obj.tag;\r\n    if (kind == \"objectSize\" || kind == \"objectPoint\") {\r\n      this.placeDeco(\r\n        this.activeDeco.node,\r\n        this.activeDeco.decoPoint,\r\n        this.activeDeco.objectArray[this.activeDeco.selectedDeco].objectPoint,\r\n        this.activeDeco.objectArray[this.activeDeco.selectedDeco].objectSize,\r\n        this.activeDeco.anchorType\r\n      );\r\n    }\r\n  }\r\n  updateDecoPoint() {\r\n    // console.log(kind, obj);\r\n    switch (this.activeDeco.decoType + this.activeDeco.placeType) {\r\n      case \"0101\":\r\n        this.activeDeco.decoPoint = new Vec3(0, 0, 0);\r\n        this.activeDeco.objectArray[this.activeDeco.selectedDeco].objectSize =\r\n          new Vec3(18, 18, 0);\r\n        this.activeDeco.stackable = true;\r\n        this.activeDeco.stackSize = new Vec3(18, 18, 0);\r\n        this.activeDeco.anchorType = \"01\";\r\n        break;\r\n      case \"0202\":\r\n        this.activeDeco.decoPoint = new Vec3(0, 0, 0);\r\n        this.activeDeco.objectArray[this.activeDeco.selectedDeco].objectSize =\r\n          new Vec3(0, 18, 18);\r\n        this.activeDeco.stackable = true;\r\n        this.activeDeco.stackSize = new Vec3(0, 18, 18);\r\n        this.activeDeco.anchorType = \"02\";\r\n        break;\r\n      case \"0203\":\r\n        this.activeDeco.decoPoint = new Vec3(0, 17, 0);\r\n        this.activeDeco.objectArray[this.activeDeco.selectedDeco].objectSize =\r\n          new Vec3(18, 0, 18);\r\n        this.activeDeco.stackable = true;\r\n        this.activeDeco.stackSize = new Vec3(18, 0, 18);\r\n        this.activeDeco.anchorType = \"03\";\r\n        break;\r\n      default:\r\n        this.activeDeco.anchorType = \"00\";\r\n        if (this.activeDeco.placeType == \"00\") {\r\n          this.activeDeco.decoPoint = new Vec3(8.5, 8.5, 8.5);\r\n        }\r\n    }\r\n  }\r\n  getAnchorPoint(anchorType) {\r\n    if (anchorType == \"00\") {\r\n      return new Vec3(0.5, 0.5, 0.5);\r\n    } else if (anchorType == \"01\") {\r\n      return new Vec3(0.5, 0.5, 0.0);\r\n    } else if (anchorType == \"02\") {\r\n      return new Vec3(0, 0.5, 0.5);\r\n    } else if (anchorType == \"03\") {\r\n      return new Vec3(0.5, 1, 0.5);\r\n    }\r\n  }\r\n  updateDecoPlace() {\r\n    const point = this.activeDeco.decoPoint;\r\n    const objectPoint =\r\n      this.activeDeco.objectArray[this.activeDeco.selectedDeco].objectPoint;\r\n    const size =\r\n      this.activeDeco.objectArray[this.activeDeco.selectedDeco].objectSize;\r\n    const anchorType = this.activeDeco.anchorType;\r\n    const anchor = this.getAnchorPoint(anchorType);\r\n    const decoPoint = new Vec3(\r\n      point.x + objectPoint.x + Math.max(1, size.x) / 2 + (anchor.x - 0.5),\r\n      point.y + objectPoint.y + Math.max(1, size.y) / 2 + (anchor.y - 0.5),\r\n      point.z + objectPoint.z + Math.max(1, size.z) / 2 + (anchor.z - 0.5)\r\n    );\r\n    // console.log(decoPoint);\r\n    const roomScript = this.roomNode.getComponent(\r\n      \"RoomTemplate\"\r\n    ) as RoomTemplate;\r\n    this.activeDeco.node.setPosition(\r\n      roomScript.getBlockPosition(decoPoint.x, decoPoint.y, decoPoint.z)\r\n    );\r\n  }\r\n  placeDeco(node, point, objectPoint, size, anchorType) {\r\n    const anchor = this.getAnchorPoint(anchorType);\r\n    const decoPoint = new Vec3(\r\n      point.x + objectPoint.x + Math.max(1, size.x) / 2 + (anchor.x - 0.5),\r\n      point.y + objectPoint.y + Math.max(1, size.y) / 2 + (anchor.y - 0.5),\r\n      point.z + objectPoint.z + Math.max(1, size.z) / 2 + (anchor.z - 0.5)\r\n    );\r\n    // console.log(decoPoint);\r\n    const roomScript = this.roomNode.getComponent(\r\n      \"RoomTemplate\"\r\n    ) as RoomTemplate;\r\n    node.setPosition(\r\n      roomScript.getBlockPosition(decoPoint.x, decoPoint.y, decoPoint.z)\r\n    );\r\n    this.showDecoBlock(point, size);\r\n  }\r\n  showDecoBlock(point, size) {\r\n    const roomScript = this.roomNode.getComponent(\r\n      \"RoomTemplate\"\r\n    ) as RoomTemplate;\r\n    roomScript.showDecoBlock(point, size);\r\n  }\r\n  checkDecoData() {\r\n    console.log(this.activeDeco);\r\n  }\r\n\r\n  //////////////\r\n  onFileSelected(fileData) {\r\n    // reset deco & file master\r\n    const decoMaster = this.decoMaster.getComponent(\"DecoMaster\") as DecoMaster;\r\n    decoMaster.resetDecoObject();\r\n    const fileMaster = this.fileMaster.getComponent(\"FileMaster\") as FileMaster;\r\n    fileMaster.updateFileMaster();\r\n\r\n    // set decodata\r\n    this.activeDeco = fileData;\r\n    decoMaster.decoData = this.activeDeco;\r\n    this.showDecoBlock(\r\n      this.activeDeco.decoPoint,\r\n      this.activeDeco.objectArray[this.activeDeco.selectedDeco].objectSize\r\n    );\r\n  }\r\n  onDecoSelected(decoData: Deco) {\r\n    this.activeDeco = decoData;\r\n    const decoMaster = this.decoMaster.getComponent(\"DecoMaster\") as DecoMaster;\r\n    decoMaster.resetDecoObject();\r\n    decoMaster.decoData = this.activeDeco;\r\n    this.showDecoBlock(\r\n      this.activeDeco.decoPoint,\r\n      this.activeDeco.objectArray[this.activeDeco.selectedDeco].objectSize\r\n    );\r\n    this.selectedDeco = decoData.node;\r\n  }\r\n\r\n  onTouchMove(event) {\r\n    if (this.selectedDeco) {\r\n      const location = event.touch.getUILocation();\r\n      const placeType = this.activeDeco.placeType;\r\n      const roomScript = this.roomNode.getComponent(\r\n        \"RoomTemplate\"\r\n      ) as RoomTemplate;\r\n      const zeroPos = roomScript.getBlockPosition(0, 0, 0);\r\n      const sizePos = roomScript.getBlockPosition(\r\n        this.activeDeco.objectArray[this.activeDeco.selectedDeco].objectSize.x,\r\n        this.activeDeco.objectArray[this.activeDeco.selectedDeco].objectSize.y,\r\n        this.activeDeco.objectArray[this.activeDeco.selectedDeco].objectSize.z\r\n      );\r\n      const targetList = roomScript.getBlockTarget(placeType);\r\n      let targetBlock = null;\r\n      let baseDis = 150;\r\n      for (var i in targetList) {\r\n        const block = targetList[i] as Node;\r\n        const distance = Math.sqrt(\r\n          Math.pow(\r\n            block.getWorldPosition().x -\r\n              (location.x - (sizePos.x - zeroPos.x) / 2),\r\n            2\r\n          ) +\r\n            Math.pow(\r\n              block.getWorldPosition().y -\r\n                (location.y - (sizePos.y - zeroPos.y) / 2),\r\n              2\r\n            )\r\n        );\r\n        if (distance < baseDis) {\r\n          baseDis = distance;\r\n          targetBlock = block;\r\n        }\r\n      }\r\n      if (targetBlock) {\r\n        const blockScript = targetBlock.getComponent(\"RoomBlock\") as RoomBlock;\r\n        this.activeDeco.decoPoint = blockScript.blockPosition;\r\n        this.updateDecoPlace();\r\n      }\r\n      // this.selectedDeco.setWorldPosition(new Vec3(location.x, location.y, 1));\r\n    }\r\n  }\r\n  onTouchEnd(event) {\r\n    // console.log(\"touc end\", event);\r\n    if (!event.simulate && this.selectedDeco) {\r\n      this.selectedDeco = null;\r\n    }\r\n  }\r\n  //////////////\r\n  setSelectedDeco(idx) {\r\n    if (this.activeDeco) {\r\n      this.activeDeco.selectedDeco = idx;\r\n      if (this.activeDeco.objectArray[idx].spriteFrame) {\r\n        this.activeDeco.node.getComponent(Sprite).spriteFrame =\r\n          this.activeDeco.objectArray[idx].spriteFrame;\r\n        this.updateDecoPlace();\r\n      } else {\r\n        this.activeDeco.node.getComponent(Sprite).spriteFrame =\r\n          this.assetManager.assetDic[\"Deco/default_sprite\"];\r\n      }\r\n    }\r\n  }\r\n  replaceDeco(kind, point, obj?) {\r\n    if (this.activeDeco) {\r\n      const imgPos = this.decoMaster\r\n        .getComponent(DecoMaster)\r\n        .imgNode.getWorldPosition();\r\n      const imgDistance = Math.sqrt(\r\n        Math.pow(imgPos.x - point.x, 2) + Math.pow(imgPos.y - point.y, 2)\r\n      );\r\n      const shadowPos = this.decoMaster\r\n        .getComponent(DecoMaster)\r\n        .shadowNode.getWorldPosition();\r\n      const shadowDistance = Math.sqrt(\r\n        Math.pow(shadowPos.x - point.x, 2) + Math.pow(shadowPos.y - point.y, 2)\r\n      );\r\n      if (kind == \"touchEnd\") {\r\n        if (imgDistance <= 150) {\r\n          this.replaceObjImage(0, obj);\r\n          this.decoMaster.getComponent(DecoMaster).replaceImg(0, obj);\r\n        } else if (shadowDistance <= 150) {\r\n          this.replaceObjImage(1, obj);\r\n          this.decoMaster.getComponent(DecoMaster).replaceImg(1, obj);\r\n        }\r\n      }\r\n    }\r\n  }\r\n  replaceObjImage(kind, imgObject) {\r\n    const imgAsset = new ImageAsset(imgObject.img);\r\n    const spriteFrame = new SpriteFrame();\r\n    const tex = new Texture2D();\r\n    tex.image = imgAsset;\r\n    spriteFrame.texture = tex;\r\n    if (\r\n      this.activeDeco.objectArray[this.activeDeco.selectedDeco].objectId == \"\"\r\n    ) {\r\n      this.activeDeco.objectArray[this.activeDeco.selectedDeco].objectId =\r\n        uuidv4();\r\n    }\r\n\r\n    if (kind == 1) {\r\n      this.activeDeco.objectArray[this.activeDeco.selectedDeco].shadowFile =\r\n        imgObject.file;\r\n      this.activeDeco.objectArray[this.activeDeco.selectedDeco].shadowFrame =\r\n        spriteFrame;\r\n      return;\r\n    }\r\n\r\n    if (kind == 0) {\r\n      this.activeDeco.objectArray[this.activeDeco.selectedDeco].imgFile =\r\n        imgObject.file;\r\n      this.activeDeco.objectArray[this.activeDeco.selectedDeco].spriteFrame =\r\n        spriteFrame;\r\n      this.activeDeco.objectArray[this.activeDeco.selectedDeco].imgURL = \"\";\r\n      this.activeDeco.node.getComponent(Sprite).spriteFrame = spriteFrame;\r\n    }\r\n\r\n    if (this.activeDeco.selectedDeco == 0) {\r\n      const tag = this.activeDeco.placeType;\r\n      if (tag == \"01\") {\r\n        const xSize = Math.min(18, Math.ceil(spriteFrame.width / (140 / 3)));\r\n        const ySize = Math.min(18, Math.ceil(spriteFrame.height / (40 / 3)));\r\n        this.activeDeco.objectArray[this.activeDeco.selectedDeco].objectSize =\r\n          new Vec3(xSize, ySize, 0);\r\n      } else if (tag == \"02\") {\r\n        const ySize = Math.min(18, Math.ceil(spriteFrame.width / (70 / 3)));\r\n        const zSize = Math.min(18, Math.ceil(spriteFrame.height / (85 / 3)));\r\n        this.activeDeco.objectArray[this.activeDeco.selectedDeco].objectSize =\r\n          new Vec3(0, ySize, zSize);\r\n      } else if (tag == \"03\") {\r\n        const xSize = Math.min(18, Math.ceil(spriteFrame.width / (70 / 3)));\r\n        const zSize = Math.min(18, Math.ceil(spriteFrame.height / (85 / 3)));\r\n        this.activeDeco.objectArray[this.activeDeco.selectedDeco].objectSize =\r\n          new Vec3(xSize, 0, zSize);\r\n      }\r\n    } else {\r\n      this.activeDeco.objectArray[this.activeDeco.selectedDeco].objectPoint =\r\n        this.activeDeco.objectArray[0].objectPoint;\r\n      this.activeDeco.objectArray[this.activeDeco.selectedDeco].objectSize =\r\n        this.activeDeco.objectArray[0].objectSize;\r\n    }\r\n    this.updateDecoPlace();\r\n  }\r\n  //////////////\r\n  async sendImage(fileName, img) {\r\n    // (1) send images\r\n    const r = await fetch(\r\n      \"https://us-central1-slot-deco.cloudfunctions.net/uploadImage\",\r\n      {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          \"Access-Control-Allow-Origin\": \"*\",\r\n        },\r\n        body: JSON.stringify({\r\n          image: String(img),\r\n          fileName: fileName,\r\n        }),\r\n      }\r\n    );\r\n    return JSON.parse(await r.text());\r\n    // console.log(result);\r\n  }\r\n  roomDecoSelected(node, idx) {\r\n    this.selectedIdx = Number(idx);\r\n    const decoKeys = Object.keys(this.decoDic);\r\n    for (var i in decoKeys) {\r\n      const key = decoKeys[i];\r\n      const decoObject = this.decoDic[key];\r\n      decoObject.selectedDeco = this.selectedIdx;\r\n      decoObject.node.getComponent(Sprite).spriteFrame =\r\n        decoObject.objectArray[this.selectedIdx].spriteFrame;\r\n\r\n      this.placeDeco(\r\n        decoObject.node,\r\n        decoObject.decoPoint,\r\n        decoObject.objectArray[decoObject.selectedDeco].objectPoint,\r\n        decoObject.objectArray[decoObject.selectedDeco].objectSize,\r\n        decoObject.anchorType\r\n      );\r\n    }\r\n  }\r\n  //////////\r\n  resetRoomDeco() {\r\n    const modalLayer = this.setModalColor();\r\n    const alertPrefab = instantiate(this.assetManager.prefabDic[\"DecoAlert\"]);\r\n    modalLayer.addChild(alertPrefab);\r\n    const alertScript = alertPrefab.getComponent(DecoAlert);\r\n    alertScript.setTitleLabel(\"방 초기화\");\r\n    alertScript.setMainLabel(\"모든 방의 데코레이션을 초기화하시겠습니까?\");\r\n    var self = this;\r\n    alertScript.yesEvent = () => {\r\n      const decoKeys = Object.keys(self.decoDic);\r\n      for (var i in decoKeys) {\r\n        const key = decoKeys[i];\r\n        if (self.decoDic[key].node) {\r\n          this.decoDic[key].node.removeFromParent();\r\n        }\r\n        delete self.decoDic[key];\r\n      }\r\n      this.eraseDeco();\r\n      const fileMaster = this.fileMaster.getComponent(\r\n        \"FileMaster\"\r\n      ) as FileMaster;\r\n      fileMaster.removeObjDic();\r\n      alertScript.removeAlert();\r\n    };\r\n  }\r\n  async saveRoomDeco() {\r\n    const modalLayer = this.setModalColor();\r\n    const alertPrefab = instantiate(this.assetManager.prefabDic[\"DecoAlert\"]);\r\n    modalLayer.addChild(alertPrefab);\r\n    const alertScript = alertPrefab.getComponent(DecoAlert);\r\n    alertScript.setTitleLabel(\"데코레이션 저장\");\r\n    alertScript.setMainLabel(\"방의 데코레이션을 서버에 정하시겠습니까?\");\r\n    var self = this;\r\n    alertScript.yesEvent = async () => {\r\n      const objList = [];\r\n      const decoList = [];\r\n      const roomDic = {\r\n        roomId: uuidv4(),\r\n        docoList: [],\r\n      };\r\n      ////////////////////\r\n      const decoKeys = Object.keys(self.decoDic);\r\n      for (var i in decoKeys) {\r\n        const decoKey = decoKeys[i];\r\n        const decoObjList = [];\r\n        for (var j in self.decoDic[decoKey].objectArray) {\r\n          const obj = self.decoDic[decoKey].objectArray[j];\r\n          if (obj.objectId == \"empty\") {\r\n            continue;\r\n          }\r\n          const copyObj = Object.assign({}, obj);\r\n          delete copyObj[\"spriteFrame\"];\r\n          delete copyObj[\"imgFile\"];\r\n          delete copyObj[\"shadowFrame\"];\r\n          delete copyObj[\"shadowFile\"];\r\n          copyObj.objectPlace = {\r\n            x: obj.objectPlace.x,\r\n            y: obj.objectPlace.y,\r\n            z: obj.objectPlace.z,\r\n          };\r\n          copyObj.objectPoint = {\r\n            x: obj.objectPoint.x,\r\n            y: obj.objectPoint.y,\r\n            z: obj.objectPoint.z,\r\n          };\r\n          copyObj.objectSize = {\r\n            x: obj.objectSize.x,\r\n            y: obj.objectSize.y,\r\n            z: obj.objectSize.z,\r\n          };\r\n          const result = await self.sendImage(obj.objectId, obj.imgFile);\r\n          if (result.result == \"success\") {\r\n            copyObj.imgURL = result.url;\r\n            objList.push(copyObj);\r\n            decoObjList.push(obj.objectId);\r\n            // send obj data to server\r\n          }\r\n        }\r\n        const copyDeco = Object.assign({}, self.decoDic[decoKey]) as any;\r\n        delete copyDeco[\"node\"];\r\n        delete copyDeco[\"label\"];\r\n        delete copyDeco[\"objectArray\"];\r\n        copyDeco.decoPoint = {\r\n          x: copyDeco.decoPoint.x,\r\n          y: copyDeco.decoPoint.y,\r\n          z: copyDeco.decoPoint.z,\r\n        };\r\n        copyDeco.stackSize = {\r\n          x: copyDeco.stackSize.x,\r\n          y: copyDeco.stackSize.y,\r\n          z: copyDeco.stackSize.z,\r\n        };\r\n        copyDeco.objectArray = decoObjList;\r\n        decoList.push(copyDeco);\r\n        roomDic.docoList.push(self.decoDic[decoKey].decoId);\r\n        // send deco data to server\r\n      }\r\n      console.log(objList);\r\n      console.log(decoList);\r\n      console.log(roomDic);\r\n      console.log(this.decoDic);\r\n      // send room data to server\r\n    };\r\n  }\r\n}\r\n"]}