{"version":3,"sources":["file:///Users/david/Desktop/David/cocos/slot_deco/assets/scripts/Prefabs/Deco/FileTitle-001.ts"],"names":["_decorator","Component","Node","Label","Vec3","color","Sprite","UITransformComponent","Size","AssetManager","ccclass","property","FileTitle","onLoad","assetManager","getInstance","scrollNode","getComponent","setContentSize","setLabel","string","labelNode","onArrowClicked","opened","scale","arrowNode","getScale","setScale","x","Math","abs","y","z","active","fileMaster","updateFileMaster","setActive","bool","node","getTitleSize","min","fileDatas","length","setFileData","contentNode","removeAllChildren","i","label","addComponent","addChild","setPosition","id"],"mappings":"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","sourcesContent":["import {\n  _decorator,\n  Component,\n  Node,\n  Label,\n  Vec3,\n  color,\n  Sprite,\n  UITransformComponent,\n  Size,\n} from \"cc\";\nimport FileMaster from \"./FileMaster\";\nimport { Deco } from \"../../Scenes/RoomScene\";\nimport AssetManager from \"../../DataManager/AssetManager\";\nconst { ccclass, property } = _decorator;\n\n@ccclass(\"FileTitle\")\nexport default class FileTitle extends Component {\n  assetManager: AssetManager = null;\n  @property(Node)\n  labelNode: Node | null = null;\n  @property(Node)\n  arrowNode: Node | null = null;\n  @property(Node)\n  scrollNode: Node | null = null;\n  @property(Node)\n  contentNode: Node | null = null;\n  opened = false;\n  tag = \"00\";\n  fileDatas = [];\n  fileMaster: FileMaster = null;\n\n  async onLoad() {\n    this.assetManager = AssetManager.getInstance();\n    this.scrollNode\n      .getComponent(UITransformComponent)\n      .setContentSize(new Size(850, 10));\n  }\n  setLabel(string) {\n    this.labelNode.getComponent(Label).string = string;\n  }\n  onArrowClicked() {\n    this.opened = !this.opened;\n    const scale = this.arrowNode.getScale();\n    if (this.opened) {\n      // open\n      this.arrowNode.setScale(new Vec3(scale.x, -Math.abs(scale.y), scale.z));\n      this.scrollNode.active = true;\n    } else {\n      // close\n      this.arrowNode.setScale(new Vec3(scale.x, Math.abs(scale.y), scale.z));\n      this.scrollNode.active = false;\n    }\n    this.fileMaster.updateFileMaster();\n  }\n  setActive(bool) {\n    if (bool) {\n      this.labelNode.getComponent(Label).color = color(255, 0, 0, 255);\n      this.node.getComponent(Sprite).color = color(100, 100, 100, 255);\n    } else {\n      this.labelNode.getComponent(Label).color = color(0, 0, 0, 255);\n      this.node.getComponent(Sprite).color = color(211, 211, 211, 255);\n    }\n  }\n  getTitleSize() {\n    if (this.opened) {\n      return new Vec3(\n        850,\n        80 + Math.min(250, 10 + 80 * this.fileDatas.length),\n        1\n      );\n    } else {\n      return new Vec3(850, 80, 1);\n    }\n  }\n  setFileData(fileDatas: Deco[]) {\n    this.fileDatas = fileDatas;\n    const length = fileDatas.length;\n    this.scrollNode\n      .getComponent(UITransformComponent)\n      .setContentSize(new Size(850, Math.min(250, 10 + 80 * length)));\n    // this.contentNode.parent\n    //   .getComponent(UITransformComponent)\n    //   .setContentSize(new Size(850, Math.min(250, 10 + 80 * length)));\n    this.contentNode\n      .getComponent(UITransformComponent)\n      .setContentSize(new Size(850, 90 + 80 * length));\n    ///////////////////////////\n    this.contentNode.removeAllChildren();\n    for (var i = 0; i < length; i++) {\n      const node = new Node();\n      const label = node.addComponent(Label) as Label;\n      this.contentNode.addChild(node);\n      node.setPosition(new Vec3(0, -40 - 80 * i, 1));\n      label.string = fileDatas[i].id;\n    }\n  }\n}\n"]}