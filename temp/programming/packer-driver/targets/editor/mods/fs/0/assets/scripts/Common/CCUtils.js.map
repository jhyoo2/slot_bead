{"version":3,"sources":["file:///Users/david/Desktop/David/cocos/slot_bead/assets/scripts/Common/CCUtils.ts"],"names":["_decorator","tween","Vec4","Color","RenderComponent","Component","ccclass","property","CCUtils","toggleVisibility","target","duration","_renderComps","_getAllRenderComponents","_tmpComponent","scheduleOnce","i","length","render","enabled","show","start","hide","fadeIn","c","renders","x","color","r","y","g","z","b","w","a","tempColor","to","onUpdate","fadeOut","getComponentsInChildren"],"mappings":"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","sourcesContent":["import {\n  _decorator,\n  Node,\n  tween,\n  Vec4,\n  Color,\n  RenderComponent,\n  Component,\n} from \"cc\";\nconst { ccclass, property } = _decorator;\n\n@ccclass(\"CCUtils\")\nexport class CCUtils {\n  /**\n   * 显隐状态切换\n   * 替代cc.toggleVisibility\n   * @param target target, 目标节点\n   * @param duration duration, 隐藏时间\n   * @example\n   * ```ts\n   * import { CCUtils } from 'ccUtils';\n   * CCUtils.toggleVisibility(node);\n   * CCUtils.toggleVisibility(node, 2);\n   * ```\n   */\n  public static toggleVisibility(target: Node, duration: number = 0) {\n    var _renderComps = this._getAllRenderComponents(target);\n\n    if (duration > 0) {\n      this._tmpComponent.scheduleOnce(() => {\n        for (var i = 0; i < _renderComps.length; i++) {\n          var render = _renderComps[i];\n          render.enabled = !render.enabled;\n        }\n      }, duration);\n    } else {\n      for (var i = 0; i < _renderComps.length; i++) {\n        var render = _renderComps[i];\n        render.enabled = !render.enabled;\n      }\n    }\n  }\n\n  /**\n   * 立即显示\n   * tween版本实现，替代cc.show\n   * @param target target, 目标节点\n   * @param duration duration, 隐藏时间\n   * @example\n   * ```ts\n   * import { CCUtils } from 'ccUtils';\n   * CCUtils.show(node);\n   * CCUtils.show(node, 2);\n   * ```\n   */\n  public static show(target: Node, duration: number = 0) {\n    if (duration > 0) {\n      this._tmpComponent.scheduleOnce(() => {\n        tween(target).show().start();\n      }, duration);\n    } else {\n      tween(target).show().start();\n    }\n  }\n\n  /**\n   * 立即隐藏\n   * tween版本实现，替代cc.hide\n   * @param target target, 目标节点\n   * @param duration duration, 隐藏时间\n   * @example\n   * ```ts\n   * import { CCUtils } from 'ccUtils';\n   * CCUtils.hide(node);\n   * CCUtils.hide(node, 2);\n   * ```\n   */\n  public static hide(target: Node, duration: number = 0) {\n    if (duration > 0) {\n      this._tmpComponent.scheduleOnce(() => {\n        tween(target).hide().start();\n      }, duration);\n    } else {\n      tween(target).hide().start();\n    }\n  }\n\n  /**\n   * 渐显效果\n   * tween版本实现，替代cc.fadeIn\n   * @param target target, 目标节点\n   * @param duration duration, 渐显时间, 单位秒\n   * @example\n   * ```ts\n   * import { CCUtils } from 'ccUtils';\n   * CCUtils.fadeIn(node, 1);\n   * ```\n   */\n  public static fadeIn(target: Node, duration: number) {\n    let c = new Vec4();\n    let renders = this._getAllRenderComponents(target);\n\n    for (let i = 0; i < renders.length; i++) {\n      c.x = renders[i].color.r;\n      c.y = renders[i].color.g;\n      c.z = renders[i].color.b;\n      c.w = renders[i].color.a;\n      let tempColor = new Color();\n\n      tween(c)\n        .to(duration, new Vec4(c.x, c.y, c.z, 255), {\n          onUpdate: () => {\n            tempColor.r = c.x;\n            tempColor.b = c.y;\n            tempColor.g = c.z;\n            tempColor.a = c.w;\n            if (renders[i] && renders[i].color) {\n              // console.log(renders[i]);\n              renders[i].color = tempColor;\n            }\n          },\n        })\n        .start();\n    }\n  }\n\n  /**\n   * 渐隐效果\n   * tween版本实现，替代cc.fadeOut\n   * @param target target, 目标节点\n   * @param duration duration, 渐显时间, 单位秒\n   * @example\n   * ```ts\n   * import { CCUtils } from 'ccUtils';\n   * CCUtils.fadeIn(node, 1);\n   * ```\n   */\n  public static fadeOut(target: Node, duration: number) {\n    let c = new Vec4();\n    let renders = this._getAllRenderComponents(target);\n\n    for (let i = 0; i < renders.length; i++) {\n      c.x = renders[i].color.r;\n      c.y = renders[i].color.g;\n      c.z = renders[i].color.b;\n      c.w = renders[i].color.a;\n      let tempColor = new Color();\n\n      tween(c)\n        .to(duration, new Vec4(c.x, c.y, c.z, 0), {\n          onUpdate: () => {\n            tempColor.r = c.x;\n            tempColor.b = c.y;\n            tempColor.g = c.z;\n            tempColor.a = c.w;\n            if (renders[i] && renders[i].color) {\n              // console.log(renders[i]);\n              renders[i].color = tempColor;\n            }\n          },\n        })\n        .start();\n    }\n  }\n\n  private static _getAllRenderComponents(target: Node) {\n    return target.getComponentsInChildren(RenderComponent);\n  }\n  private static _tmpComponent = new Component();\n}\n"]}