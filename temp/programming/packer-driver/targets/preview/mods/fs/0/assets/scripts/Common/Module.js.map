{"version":3,"sources":["file:///Users/david/Desktop/David/cocos/slot_bead/assets/scripts/Common/Module.ts"],"names":["uuidv4","replace","c","r","Math","random","v","toString","_decorator","Component","ccclass","property","CM","START","UPDATE","DONE","MOVE","REJECTED","READY","RUNNING","WAITING","SOLO","MULTI","CATCH_NODE","MISSING","MISS_TOUCH","CMObject","myValue","_value","_key","_dataType","value","decryptData","key","dataType","xorConvert","text","undefined","Array","prototype","slice","call","map","index","String","fromCharCode","charCodeAt","length","join","getObject","myObject","resultObject","tey","checkCMObject","push","getCMObject","JSON","parse","stringify","inputValue"],"mappings":";;;;;;;;;;;;;;;AAGO,WAASA,MAAT,GAAkB;AACvB,WAAO,uCAAuCC,OAAvC,CAA+C,OAA/C,EAAwD,UAAUC,CAAV,EAAa;AAC1E,UAAIC,CAAC,GAAIC,IAAI,CAACC,MAAL,KAAgB,EAAjB,GAAuB,CAA/B;AAAA,UACEC,CAAC,GAAGJ,CAAC,IAAI,GAAL,GAAWC,CAAX,GAAgBA,CAAC,GAAG,GAAL,GAAY,GADjC;AAEA,aAAOG,CAAC,CAACC,QAAF,CAAW,EAAX,CAAP;AACD,KAJM,CAAP;AAKD;;oBANeP,M;;;;;AAHPQ,MAAAA,U,OAAAA,U;AAAyBC,MAAAA,S,OAAAA,S;;;;;;;AAC1BC,MAAAA,O,GAAsBF,U,CAAtBE,O;AAASC,MAAAA,Q,GAAaH,U,CAAbG,Q;;oBAWJC,E,GADZF,O;;;;;;;;QACuBD,S,sCACC;AACrBI,QAAAA,KAAK,EAAE,CADc;AAErBC,QAAAA,MAAM,EAAE,CAFa;AAGrBC,QAAAA,IAAI,EAAE,CAHe;AAIrBC,QAAAA,IAAI,EAAE,CAJe;AAKrBC,QAAAA,QAAQ,EAAE,CALW;AAMrBC,QAAAA,KAAK,EAAE,CANc;AAOrBC,QAAAA,OAAO,EAAE;AAPY,O,0CAUI;AACzBC,QAAAA,OAAO,EAAE,CADgB;AAEzBP,QAAAA,KAAK,EAAE,CAFkB;AAGzBM,QAAAA,OAAO,EAAE,CAHgB;AAIzBJ,QAAAA,IAAI,EAAE;AAJmB,O,wCAOF;AACvBM,QAAAA,IAAI,EAAE,CADiB;AAEvBC,QAAAA,KAAK,EAAE;AAFgB,O,yCAKC;AACxBT,QAAAA,KAAK,EAAE,CADiB;AAExBU,QAAAA,UAAU,EAAE,CAFY;AAGxBC,QAAAA,OAAO,EAAE,CAHe;AAIxBC,QAAAA,UAAU,EAAE;AAJY,O;;0BASfC,Q,GADZhB,O;AAMC,0BAAYiB,OAAZ,EAAqB;AAAA,0CAJC,CAID;;AAAA,wCAHD,CAGC;;AAAA,6CAFI,CAEJ;;AACnB,eAAKC,MAAL,GAAc,CAAd;AACA,eAAKC,IAAL,GAAY,EAAZ;AACA,eAAKC,SAAL,GAAiB,QAAjB;;AACA,cAAIH,OAAJ,EAAa;AACX,iBAAKI,KAAL,GAAaJ,OAAb;AACD;AACF;;;;eAqBD3B,M,GAAA,kBAAS;AACP,iBAAO,eAAeC,OAAf,CAAuB,OAAvB,EAAgC,UAAUC,CAAV,EAAa;AAClD,gBAAIC,CAAC,GAAIC,IAAI,CAACC,MAAL,KAAgB,EAAjB,GAAuB,CAA/B;AAAA,gBACEC,CAAC,GAAGJ,CAAC,IAAI,GAAL,GAAWC,CAAX,GAAgBA,CAAC,GAAG,GAAL,GAAY,GADjC;AAEA,mBAAOG,CAAC,CAACC,QAAF,CAAW,EAAX,CAAP;AACD,WAJM,CAAP;AAKD,S;;eACDyB,W,GAAA,qBAAYD,KAAZ,EAAmBE,GAAnB,EAAwBC,QAAxB,EAAkC;AAChC,iBAAOA,QAAQ,IAAI,QAAZ,GACH,KAAKC,UAAL,CAAgBJ,KAAhB,EAAuBE,GAAvB,IAA8B,CAD3B,GAEH,KAAKE,UAAL,CAAgBJ,KAAhB,EAAuBE,GAAvB,CAFJ;AAGD,S;;eACDE,U,GAAA,oBAAWC,IAAX,EAAiBH,GAAjB,EAAsB;AACpB;AACAG,UAAAA,IAAI,GAAGA,IAAI,IAAIC,SAAR,IAAqBD,IAAI,IAAI,IAA7B,GAAoC,EAApC,GAAyCA,IAAhD;AACA,iBAAOE,KAAK,CAACC,SAAN,CAAgBC,KAAhB,CACJC,IADI,CACCL,IADD,EAEJM,GAFI,CAEA,UAAUxC,CAAV,EAAayC,KAAb,EAAoB;AACvB,mBAAOC,MAAM,CAACC,YAAP,CACL3C,CAAC,CAAC4C,UAAF,CAAa,CAAb,IAAkBb,GAAG,CAACU,KAAK,GAAGV,GAAG,CAACc,MAAb,CAAH,CAAwBD,UAAxB,CAAmC,CAAnC,CADb,CAAP;AAGD,WANI,EAOJE,IAPI,CAOC,EAPD,CAAP;AAQD,S;;eACDC,S,GAAA,mBAAUC,QAAV,EAAoB;AAClB,cAAIC,YAAY,GAAG,EAAnB;;AACA,eAAK,IAAIlB,GAAT,IAAgBiB,QAAhB,EAA0B;AACxB,gBAAI,OAAOA,QAAQ,CAACjB,GAAD,CAAf,IAAwB,QAA5B,EAAsC;AACpC,kBAAIiB,QAAQ,CAACjB,GAAD,CAAR,CAAcc,MAAd,IAAwBV,SAAxB,IAAqCa,QAAQ,CAACjB,GAAD,CAAR,CAAcc,MAAd,IAAwB,CAAjE,EAAoE;AAClEI,gBAAAA,YAAY,CAAClB,GAAD,CAAZ,GAAoB,EAApB;;AACA,qBAAK,IAAImB,GAAT,IAAgBF,QAAQ,CAACjB,GAAD,CAAxB,EAA+B;AAC7B,sBAAI,KAAKoB,aAAL,CAAmBH,QAAQ,CAACjB,GAAD,CAAR,CAAcmB,GAAd,CAAnB,CAAJ,EAA4C;AAC1CD,oBAAAA,YAAY,CAAClB,GAAD,CAAZ,CAAkBqB,IAAlB,CAAuBJ,QAAQ,CAACjB,GAAD,CAAR,CAAcmB,GAAd,EAAmBrB,KAA1C;AACD,mBAFD,MAEO;AACLoB,oBAAAA,YAAY,CAAClB,GAAD,CAAZ,CAAkBqB,IAAlB,CAAuB,KAAKL,SAAL,CAAeC,QAAQ,CAACjB,GAAD,CAAR,CAAcmB,GAAd,CAAf,CAAvB;AACD;AACF;AACF,eATD,MASO;AACL,oBAAI,KAAKC,aAAL,CAAmBH,QAAQ,CAACjB,GAAD,CAA3B,CAAJ,EAAuC;AACrCkB,kBAAAA,YAAY,CAAClB,GAAD,CAAZ,GAAoBiB,QAAQ,CAACjB,GAAD,CAAR,CAAcF,KAAlC;AACD,iBAFD,MAEO;AACLoB,kBAAAA,YAAY,CAAClB,GAAD,CAAZ,GAAoB,KAAKgB,SAAL,CAAeC,QAAQ,CAACjB,GAAD,CAAvB,CAApB;AACD;AACF;AACF,aAjBD,MAiBO;AACLkB,cAAAA,YAAY,CAAClB,GAAD,CAAZ,GAAoBiB,QAAQ,CAACjB,GAAD,CAA5B;AACD;AACF;;AACD,iBAAOkB,YAAP;AACD,S;;eACDE,a,GAAA,uBAAcH,QAAd,EAAwB;AACtB,cACE,OAAOA,QAAP,IAAmB,QAAnB,IACAA,QAAQ,CAACrB,IAAT,IAAiBQ,SADjB,IAEAa,QAAQ,CAACtB,MAAT,IAAmBS,SAHrB,EAIE;AACA,mBAAO,IAAP;AACD,WAND,MAMO;AACL,mBAAO,KAAP;AACD;AACF,S;;eACDkB,W,GAAA,qBAAYL,QAAZ,EAAsB;AACpB,cAAIC,YAAY,GAAG,EAAnB;;AACA,eAAK,IAAIlB,GAAT,IAAgBiB,QAAhB,EAA0B;AACxB,gBAAI,OAAOA,QAAQ,CAACjB,GAAD,CAAf,IAAwB,QAA5B,EAAsC;AACpC,kBAAIiB,QAAQ,CAACjB,GAAD,CAAR,CAAcc,MAAd,IAAwBV,SAAxB,IAAqCa,QAAQ,CAACjB,GAAD,CAAR,CAAcc,MAAd,IAAwB,CAAjE,EAAoE;AAClEI,gBAAAA,YAAY,CAAClB,GAAD,CAAZ,GAAoB,EAApB;;AACA,qBAAK,IAAImB,GAAT,IAAgBF,QAAQ,CAACjB,GAAD,CAAxB,EAA+B;AAC7B,sBAAI,OAAOiB,QAAQ,CAACjB,GAAD,CAAR,CAAcmB,GAAd,CAAP,IAA6B,QAAjC,EAA2C;AACzCD,oBAAAA,YAAY,CAAClB,GAAD,CAAZ,CAAkBqB,IAAlB,CAAuB,KAAKC,WAAL,CAAiBL,QAAQ,CAACjB,GAAD,CAAR,CAAcmB,GAAd,CAAjB,CAAvB;AACD,mBAFD,MAEO;AACLD,oBAAAA,YAAY,CAAClB,GAAD,CAAZ,CAAkBqB,IAAlB,CAAuB,IAAI5B,QAAJ,CAAawB,QAAQ,CAACjB,GAAD,CAAR,CAAcmB,GAAd,CAAb,CAAvB;AACD;AACF;AACF,eATD,MASO;AACL,oBAAI,KAAKC,aAAL,CAAmBH,QAAQ,CAACjB,GAAD,CAA3B,CAAJ,EAAuC;AACrCkB,kBAAAA,YAAY,CAAClB,GAAD,CAAZ,GAAoB,IAAIP,QAAJ,CAAawB,QAAQ,CAACjB,GAAD,CAAR,CAAcF,KAA3B,CAApB;AACD,iBAFD,MAEO;AACLoB,kBAAAA,YAAY,CAAClB,GAAD,CAAZ,GAAoB,KAAKsB,WAAL,CAAiBL,QAAQ,CAACjB,GAAD,CAAzB,CAApB;AACD;AACF;AACF,aAjBD,MAiBO;AACLkB,cAAAA,YAAY,CAAClB,GAAD,CAAZ,GAAoB,IAAIP,QAAJ,CAAawB,QAAQ,CAACjB,GAAD,CAArB,CAApB;AACD;AACF;;AACD,iBAAOkB,YAAP;AACD,S;;;;eA1GD,eAAY;AACV;AACA,gBAAI,KAAKrB,SAAL,IAAkB,QAAtB,EAAgC;AAC9B,qBAAO,KAAKK,UAAL,CAAgB,KAAKP,MAArB,EAA6B,KAAKC,IAAlC,IAA0C,CAAjD;AACD,aAFD,MAEO,IAAI,KAAKC,SAAL,IAAkB,QAAtB,EAAgC;AACrC,qBAAO0B,IAAI,CAACC,KAAL,CAAW,KAAKtB,UAAL,CAAgB,KAAKP,MAArB,EAA6B,KAAKC,IAAlC,CAAX,CAAP;AACD,aAFM,MAEA;AACL,qBAAO,KAAKM,UAAL,CAAgB,KAAKP,MAArB,EAA6B,KAAKC,IAAlC,CAAP;AACD;AACF,W;eACD,aAAUF,OAAV,EAAmB;AACjB,iBAAKE,IAAL,GAAY,KAAK7B,MAAL,EAAZ;AACA,iBAAK8B,SAAL,GAAiB,OAAOH,OAAxB;;AACA,gBAAI,KAAKG,SAAL,IAAkB,QAAtB,EAAgC;AAC9BH,cAAAA,OAAO,GAAG6B,IAAI,CAACE,SAAL,CAAe/B,OAAf,CAAV;AACD;;AACD,gBAAIgC,UAAU,GAAG,KAAK7B,SAAL,IAAkB,QAAlB,GAA6Bc,MAAM,CAACjB,OAAD,CAAnC,GAA+CA,OAAhE;AACA,iBAAKC,MAAL,GAAc,KAAKO,UAAL,CAAgBwB,UAAhB,EAA4B,KAAK9B,IAAjC,CAAd,CAPiB,CAQjB;AACD","sourcesContent":["import { _decorator, Node, Event, Component } from \"cc\";\nconst { ccclass, property } = _decorator;\n\nexport function uuidv4() {\n  return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function (c) {\n    var r = (Math.random() * 16) | 0,\n      v = c == \"x\" ? r : (r & 0x3) | 0x8;\n    return v.toString(16);\n  });\n}\n\n@ccclass\nexport class CM extends Component {\n  public static OpCode = {\n    START: 1,\n    UPDATE: 2,\n    DONE: 3,\n    MOVE: 4,\n    REJECTED: 5,\n    READY: 6,\n    RUNNING: 7,\n  };\n\n  public static GameStatus = {\n    WAITING: 0,\n    START: 1,\n    RUNNING: 2,\n    DONE: 3,\n  };\n\n  public static GameType = {\n    SOLO: 0,\n    MULTI: 1,\n  };\n\n  public static EventType = {\n    START: 0,\n    CATCH_NODE: 1,\n    MISSING: 2,\n    MISS_TOUCH: 3,\n  };\n}\n\n@ccclass\nexport class CMObject {\n  private _value: any = 0;\n  private _key: any = 0;\n  private _dataType: any = 0;\n\n  constructor(myValue) {\n    this._value = 0;\n    this._key = \"\";\n    this._dataType = \"number\";\n    if (myValue) {\n      this.value = myValue;\n    }\n  }\n  get value() {\n    // return this._value;\n    if (this._dataType == \"number\") {\n      return this.xorConvert(this._value, this._key) * 1;\n    } else if (this._dataType == \"object\") {\n      return JSON.parse(this.xorConvert(this._value, this._key));\n    } else {\n      return this.xorConvert(this._value, this._key);\n    }\n  }\n  set value(myValue) {\n    this._key = this.uuidv4();\n    this._dataType = typeof myValue;\n    if (this._dataType == \"object\") {\n      myValue = JSON.stringify(myValue);\n    }\n    var inputValue = this._dataType != \"String\" ? String(myValue) : myValue;\n    this._value = this.xorConvert(inputValue, this._key);\n    // this._value = myValue;\n  }\n  uuidv4() {\n    return \"xxxxxxxxxxxx\".replace(/[xy]/g, function (c) {\n      var r = (Math.random() * 16) | 0,\n        v = c == \"x\" ? r : (r & 0x3) | 0x8;\n      return v.toString(16);\n    });\n  }\n  decryptData(value, key, dataType) {\n    return dataType == \"number\"\n      ? this.xorConvert(value, key) * 1\n      : this.xorConvert(value, key);\n  }\n  xorConvert(text, key) {\n    // console.log(text+ '//' + key);\n    text = text == undefined || text == null ? \"\" : text;\n    return Array.prototype.slice\n      .call(text)\n      .map(function (c, index) {\n        return String.fromCharCode(\n          c.charCodeAt(0) ^ key[index % key.length].charCodeAt(0)\n        );\n      })\n      .join(\"\");\n  }\n  getObject(myObject) {\n    var resultObject = {};\n    for (var key in myObject) {\n      if (typeof myObject[key] == \"object\") {\n        if (myObject[key].length != undefined && myObject[key].length >= 0) {\n          resultObject[key] = [];\n          for (var tey in myObject[key]) {\n            if (this.checkCMObject(myObject[key][tey])) {\n              resultObject[key].push(myObject[key][tey].value);\n            } else {\n              resultObject[key].push(this.getObject(myObject[key][tey]));\n            }\n          }\n        } else {\n          if (this.checkCMObject(myObject[key])) {\n            resultObject[key] = myObject[key].value;\n          } else {\n            resultObject[key] = this.getObject(myObject[key]);\n          }\n        }\n      } else {\n        resultObject[key] = myObject[key];\n      }\n    }\n    return resultObject;\n  }\n  checkCMObject(myObject) {\n    if (\n      typeof myObject == \"object\" &&\n      myObject._key != undefined &&\n      myObject._value != undefined\n    ) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n  getCMObject(myObject) {\n    var resultObject = {};\n    for (var key in myObject) {\n      if (typeof myObject[key] == \"object\") {\n        if (myObject[key].length != undefined && myObject[key].length >= 0) {\n          resultObject[key] = [];\n          for (var tey in myObject[key]) {\n            if (typeof myObject[key][tey] == \"object\") {\n              resultObject[key].push(this.getCMObject(myObject[key][tey]));\n            } else {\n              resultObject[key].push(new CMObject(myObject[key][tey]));\n            }\n          }\n        } else {\n          if (this.checkCMObject(myObject[key])) {\n            resultObject[key] = new CMObject(myObject[key].value);\n          } else {\n            resultObject[key] = this.getCMObject(myObject[key]);\n          }\n        }\n      } else {\n        resultObject[key] = new CMObject(myObject[key]);\n      }\n    }\n    return resultObject;\n  }\n}\n"]}