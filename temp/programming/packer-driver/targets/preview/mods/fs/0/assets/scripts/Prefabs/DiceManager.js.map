{"version":3,"sources":["file:///Users/david/Desktop/David/cocos/slot_bead/assets/scripts/Prefabs/DiceManager.ts"],"names":["_decorator","Component","instantiate","AssetManager","ccclass","property","DiceManager","initDiceManager","diceData","assetManager","getInstance","diceObject","prefabDic","setPosition","diceScript","getComponent","diceManager","initDiceMaster","rollWithNetwork","rolling","rollWithRandom","rollWithFixed","iconDatas","getDiceResult","diceResult","eventTarget","showDiceResult","moveBlock","time","yPos","movePlayer","getPlayerIdx","playerIdx","getNextBlock"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,W,OAAAA,W;;AAGzBC,MAAAA,Y;;;;;;;AAFCC,MAAAA,O,GAAsBJ,U,CAAtBI,O;AAASC,MAAAA,Q,GAAaL,U,CAAbK,Q;;yBAOIC,W,WADpBF,OAAO,CAAC,aAAD,C;;;;;;;;;;;;yEAEuB,I;;wEACJ,I;;uEACZ,I;;oEACH,K;;;;;;;eACVG,e,GAAA,yBAAgBC,QAAhB,EAA0B;AACxB,eAAKC,YAAL,GAAoB;AAAA;AAAA,4CAAaC,WAAb,EAApB;AACA,cAAMC,UAAU,GAAGT,WAAW,CAAC,KAAKO,YAAL,CAAkBG,SAAlB,CAA4B,YAA5B,CAAD,CAA9B;AACAD,UAAAA,UAAU,CAACE,WAAX,CAAuB,CAAvB,EAA0B,CAA1B,EAA6B,CAA7B;AACA,cAAMC,UAAU,GAAGH,UAAU,CAACI,YAAX,CAAwB,YAAxB,CAAnB;AACAD,UAAAA,UAAU,CAACE,WAAX,GAAyB,IAAzB;AACAF,UAAAA,UAAU,CAACG,cAAX,CAA0BT,QAA1B;AACA,eAAKG,UAAL,GAAkBA,UAAlB;AACA,iBAAOA,UAAP;AACD,S;;eACDO,e,GAAA,2BAAkB;AAChB,cAAI,KAAKC,OAAT,EAAkB;AAClB,eAAKA,OAAL,GAAe,IAAf;AACA,cAAML,UAAU,GAAG,KAAKH,UAAL,CAAgBI,YAAhB,CAA6B,YAA7B,CAAnB;AACAD,UAAAA,UAAU,CAACI,eAAX;AACD,S;;eACDE,c,GAAA,0BAAiB;AACf,cAAI,KAAKD,OAAT,EAAkB;AAClB,eAAKA,OAAL,GAAe,IAAf;AACA,cAAML,UAAU,GAAG,KAAKH,UAAL,CAAgBI,YAAhB,CAA6B,YAA7B,CAAnB;AACAD,UAAAA,UAAU,CAACM,cAAX;AACD,S;;eACDC,a,GAAA,uBAAcC,SAAd,EAAyB;AACvB,cAAI,KAAKH,OAAT,EAAkB;AAClB,eAAKA,OAAL,GAAe,IAAf;AACA,cAAML,UAAU,GAAG,KAAKH,UAAL,CAAgBI,YAAhB,CAA6B,YAA7B,CAAnB;AACAD,UAAAA,UAAU,CAACO,aAAX,CAAyBC,SAAzB;AACD,S;;eACDC,a,GAAA,uBAAcC,UAAd,EAA0B;AACxB,eAAKL,OAAL,GAAe,KAAf;;AACA,cAAI,KAAKM,WAAL,IAAoB,KAAKA,WAAL,CAAiBC,cAAzC,EAAyD;AACvD,iBAAKD,WAAL,CAAiBC,cAAjB,CAAgCF,UAAhC;AACD,WAJuB,CAKxB;;AACD,S;;eACDG,S,GAAA,mBAAUC,IAAV,EAAgBC,IAAhB,EAAsB;AACpB,cAAMf,UAAU,GAAG,KAAKH,UAAL,CAAgBI,YAAhB,CAA6B,YAA7B,CAAnB;AACAD,UAAAA,UAAU,CAACa,SAAX,CAAqBC,IAArB,EAA2BC,IAA3B;AACAf,UAAAA,UAAU,CAACgB,UAAX,CAAsBF,IAAtB;AACD,S;;eACDG,Y,GAAA,wBAAe;AACb,cAAMjB,UAAU,GAAG,KAAKH,UAAL,CAAgBI,YAAhB,CAA6B,YAA7B,CAAnB;AACA,iBAAOD,UAAU,CAACkB,SAAlB;AACD,S;;eACDC,Y,GAAA,wBAAe;AACb,cAAMnB,UAAU,GAAG,KAAKH,UAAL,CAAgBI,YAAhB,CAA6B,YAA7B,CAAnB;AACA,iBAAOD,UAAU,CAACmB,YAAX,EAAP;AACD,S;;;QApDsChC,S","sourcesContent":["import { _decorator, Component, instantiate } from \"cc\";\nconst { ccclass, property } = _decorator;\n\nimport AssetManager from \"../DataManager/AssetManager\";\nimport { DiceScene } from \"../Scenes/DiceScene\";\nimport DiceMaster from \"./Dice/DiceMaster\";\n\n@ccclass(\"DiceManager\")\nexport default class DiceManager extends Component {\n  assetManager: AssetManager = null;\n  eventTarget: DiceScene = null;\n  diceObject = null;\n  rolling = false;\n  initDiceManager(diceData) {\n    this.assetManager = AssetManager.getInstance();\n    const diceObject = instantiate(this.assetManager.prefabDic[\"DiceMaster\"]);\n    diceObject.setPosition(0, 0, 0);\n    const diceScript = diceObject.getComponent(\"DiceMaster\") as DiceMaster;\n    diceScript.diceManager = this;\n    diceScript.initDiceMaster(diceData);\n    this.diceObject = diceObject;\n    return diceObject;\n  }\n  rollWithNetwork() {\n    if (this.rolling) return;\n    this.rolling = true;\n    const diceScript = this.diceObject.getComponent(\"DiceMaster\") as DiceMaster;\n    diceScript.rollWithNetwork();\n  }\n  rollWithRandom() {\n    if (this.rolling) return;\n    this.rolling = true;\n    const diceScript = this.diceObject.getComponent(\"DiceMaster\") as DiceMaster;\n    diceScript.rollWithRandom();\n  }\n  rollWithFixed(iconDatas) {\n    if (this.rolling) return;\n    this.rolling = true;\n    const diceScript = this.diceObject.getComponent(\"DiceMaster\") as DiceMaster;\n    diceScript.rollWithFixed(iconDatas);\n  }\n  getDiceResult(diceResult) {\n    this.rolling = false;\n    if (this.eventTarget && this.eventTarget.showDiceResult) {\n      this.eventTarget.showDiceResult(diceResult);\n    }\n    // // console.log(slotResult);\n  }\n  moveBlock(time, yPos) {\n    const diceScript = this.diceObject.getComponent(\"DiceMaster\") as DiceMaster;\n    diceScript.moveBlock(time, yPos);\n    diceScript.movePlayer(time);\n  }\n  getPlayerIdx() {\n    const diceScript = this.diceObject.getComponent(\"DiceMaster\") as DiceMaster;\n    return diceScript.playerIdx;\n  }\n  getNextBlock() {\n    const diceScript = this.diceObject.getComponent(\"DiceMaster\") as DiceMaster;\n    return diceScript.getNextBlock();\n  }\n}\n"]}