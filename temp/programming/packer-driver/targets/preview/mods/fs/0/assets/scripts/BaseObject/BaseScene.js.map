{"version":3,"sources":["file:///Users/david/Desktop/David/cocos/slot_bead/assets/scripts/BaseObject/BaseScene.ts"],"names":["_decorator","Component","view","ResolutionPolicy","macro","ModalLayer","ccclass","property","BaseScene","onLoad","ENABLE_MULTI_TOUCH","setResolution","setWideResolution","winSize","getCanvasSize","setFrameSize","setDesignResolutionSize","FIXED_HEIGHT","resizeWithBrowserSize","getDesignResolutionSize","heightSize","height","width","FIXED_WIDTH","removeNode","node","removeFromParent","destroy","getModalLayer","modalArray","length","removeModal","lastModal","splice","setModalLayer","zOrder","newLayer","setSiblingIndex","addChild","push","setModalColor","getModalColor","setModalBlack","getModalBlack"],"mappings":"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","sourcesContent":["import {\n  _decorator,\n  Component,\n  Node,\n  Size,\n  view,\n  ResolutionPolicy,\n  UITransform,\n  macro,\n} from \"cc\";\nconst { ccclass, property } = _decorator;\n\nimport ModalLayer from \"./ModalLayer\";\n\n@ccclass(\"BaseScene\")\nexport default class BaseScene extends Component {\n  blackLayer: Node | null = null;\n  modalArray: Node[] = [];\n  winSize: Size | null = null;\n\n  onLoad() {\n    macro.ENABLE_MULTI_TOUCH = false;\n    this.setResolution();\n  }\n  setWideResolution() {\n    var winSize = view.getCanvasSize();\n    view.setFrameSize(1920 * 0.75, 1080 * 0.75);\n    view.setDesignResolutionSize(3240, 1920, ResolutionPolicy.FIXED_HEIGHT);\n    view.resizeWithBrowserSize(true);\n    this.winSize = view.getDesignResolutionSize();\n    // console.log(\"winsize : \", this.winSize);\n  }\n\n  setResolution() {\n    var winSize = view.getCanvasSize();\n    var heightSize = (winSize.height * 1080) / winSize.width;\n    view.setDesignResolutionSize(\n      1080,\n      heightSize,\n      ResolutionPolicy.FIXED_WIDTH\n    );\n\n    view.resizeWithBrowserSize(true);\n    this.winSize = view.getDesignResolutionSize();\n    // console.log(\"winsize : \", this.winSize);\n  }\n  removeNode(node) {\n    node.removeFromParent(true);\n    node.destroy();\n  }\n  getModalLayer() {\n    return this.modalArray[this.modalArray.length - 1];\n  }\n  removeModal() {\n    if (this.modalArray.length > 0) {\n      const lastModal = this.modalArray[this.modalArray.length - 1];\n      this.modalArray.splice(this.modalArray.length - 1, 1);\n      lastModal.removeFromParent();\n    }\n  }\n  setModalLayer() {\n    // /////////////////////////////////\n    var zOrder = 80 + this.modalArray.length;\n    var newLayer = new ModalLayer().getModalLayer(this.winSize);\n    newLayer.setSiblingIndex(zOrder);\n    this.node.addChild(newLayer);\n    this.modalArray.push(newLayer);\n    // /////////////////////////////////\n    return newLayer;\n  }\n  setModalColor() {\n    // /////////////////////////////////\n    var zOrder = 80 + this.modalArray.length;\n    var newLayer = new ModalLayer().getModalColor(this.winSize);\n    newLayer.setSiblingIndex(zOrder);\n    this.node.addChild(newLayer);\n    this.modalArray.push(newLayer);\n    // /////////////////////////////////\n    return newLayer;\n  }\n  setModalBlack() {\n    // /////////////////////////////////\n    var zOrder = 90 + this.modalArray.length;\n    var newLayer = new ModalLayer().getModalBlack(this.winSize);\n    newLayer.setSiblingIndex(zOrder);\n    this.node.addChild(newLayer);\n    this.modalArray.push(newLayer);\n    // /////////////////////////////////\n    return newLayer;\n  }\n}\n"]}